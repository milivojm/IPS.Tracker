@model List<IPS.Tracker.Web.TrackerService.DefectCommentDTO>

@{
    ViewBag.Title = "Početna";
}

<div class="jumbotron">
    <h1>Podsjetnik</h1>
    <p>Dobrodošli u aplikaciju za upravljanje zadacima!</p>
</div>
<div class="row">
    <ul>
        @foreach (IPS.Tracker.Web.TrackerService.DefectCommentDTO d in Model)
        {
            <li class="media">
                <div class="pull-left">
                    <!-- issue_comment -->
                    @if (!String.IsNullOrEmpty(d.Text) && d.Text.Contains("=> Riješen"))
                    {
                        <span class="mega-octicon octicon-issue-closed"></span>
                    }
                    else if (d.Text == "Otvorio")
                    {
                        <span class="mega-octicon octicon-issue-opened"></span>
                    }
                    else
                    {
                        <span class="mega-octicon octicon-comment-discussion"></span>
                    }
                </div>
                <div class="media-heading">
                    <small>
                        <time datetime="@d.CommentDate.ToUniversalTime()" is="relative-time" title="@d.CommentDate.ToUniversalTime()">
                            @{
                    TimeSpan difference = DateTime.Now - d.CommentDate;

                    if (difference.Days > 0)
                    {
                                <text>prije @difference.Days dana</text>
                    }
                    else if (difference.Hours > 0)
                    {
                                <text>prije @difference.Hours h</text>
                    }
                    else
                    {
                                <text>prije @difference.Minutes min</text>
                    }
                            }</time></small>
                    <div>
                        <small>
                            @d.CommentatorName
                            @if (d.Text == "Otvorio")
                            {
                                <text>otvara </text>
                            }
                            else if (d.Text != null && d.Text.Contains("=> Riješen"))
                            {
                                <text>zatvara </text>
                            }
                            else
                            {
                                <text>komentira</text>
                            }
                            @Html.ActionLink("#" + d.DefectId, "Details", new { id = d.DefectId }, new { title = @d.DefectSummary }) - @d.DefectSummary
                        </small>
                    </div>
                </div>

                <div class="media-body">
                    <blockquote>
                        @if (d.Text == "Otvorio")
                        { 
                            @d.DefectDescription;
                        }
                        else
                        {
                            @d.Text
                        }
                    </blockquote>
                </div>
            </li>
        }
    </ul>
</div>
