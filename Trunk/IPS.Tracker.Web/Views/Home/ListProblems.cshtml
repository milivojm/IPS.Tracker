<script src="~/Scripts/knockout-3.1.0.js"></script>
@model IEnumerable<IPS.Tracker.Web.TrackerService.DefectDTO>
@using GridMvc.Html

@Html.Grid(Model).Columns(columns =>
{
    columns.Add(d => d.Id).Encoded(false).Sanitized(false).Titled("Broj").Sortable(false).SetWidth(40).RenderValueAs(d => Html.ActionLink(d.Id.ToString(), "Details", new { id = d.Id }));
    columns.Add(d => d.PriorityDescription).Titled("Prioritet").Sortable(false).SetWidth(50);
    columns.Add(d => d.DefectDate).Titled("Datum prijave").Sortable(false).Format("{0:dd.MM.yyyy}").SetWidth(60);
    columns.Add(d => d.StateDescription).Titled("Stanje zadatka").Sortable(false).SetWidth(50);
    columns.Add(d => d.Summary).Titled("Naziv").Sortable(false);
    columns.Add(d => d.WorkOrderName).Encoded(false).Sanitized(false).RenderValueAs(d =>
    {
        if (String.IsNullOrEmpty(d.WorkOrderName))
            return Html.Raw(String.Empty);
        else
            return Html.ActionLink(String.Format("{0} : {1}", d.WorkOrderName, d.WorkOrderLabel), "ListProblemsByWorkOrder", new { workOrderId = d.WorkOrderId, stateDescription = ViewBag.StateDescription });
    }).Titled("Radni nalog").Sortable(false).SetWidth(350);
    columns.Add(d => d.AssigneeName).Titled("Zadužen").Sortable(false).SetWidth(150).Encoded(false).Sanitized(false).RenderValueAs(d => Html.ActionLink(d.AssigneeName,"ListProblemsByUser",new { userId = d.AssigneeId}));
    columns.Add(d => d.SprintNo).Titled("Sprint").Sortable(false).SetWidth(50);
}).WithPaging(10)
