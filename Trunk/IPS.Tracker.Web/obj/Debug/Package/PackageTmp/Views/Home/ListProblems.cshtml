<script src="~/Scripts/knockout-3.1.0.js"></script>
@model IEnumerable<IPS.Tracker.Web.TrackerService.DefectDTO>
@using GridMvc.Html

@Html.Grid(Model).Columns(columns =>
{
    columns.Add(d => d.Id).Encoded(false).Sanitized(false).Titled("Broj").Sortable(true).SetWidth(40).RenderValueAs(d => Html.ActionLink(d.Id.ToString(), "Details", new { id = d.Id }));
    columns.Add(d => d.PriorityDescription).Titled("Prioritet").Sortable(true).SetWidth(50);
    columns.Add(d => d.DefectDate).Titled("Datum prijave").Sortable(true).Format("{0:dd.MM.yyyy}").SetWidth(60);
    columns.Add(d => d.StateDescription).Titled("Stanje zadatka").Sortable(true).SetWidth(50);
    columns.Add(d => d.Summary).Titled("Naziv").Sortable(true);
    columns.Add(d => d.WorkOrderName).Encoded(false).Sanitized(false).RenderValueAs(d =>
    {
        if (String.IsNullOrEmpty(d.WorkOrderName))
            return Html.Raw(String.Empty);
        else
            return Html.ActionLink(String.IsNullOrEmpty(d.WorkOrderName) ? "-" : d.WorkOrderName, "ListProblemsByWorkOrder", new { workOrderId = d.WorkOrderId });
    }).Titled("Radni nalog").Sortable(true).SetWidth(250);
    columns.Add(d => d.AssigneeName).Titled("Zadužen").Sortable(true).SetWidth(150);
}).WithPaging(10)